# 性能测试说明

本文档说明如何运行余额计算系统的性能测试。

## 前置条件

1. 安装JMeter 5.5或更高版本
2. 确保应用服务器正在运行
3. 确保数据库和Redis服务可用

## 测试场景

性能测试计划包含以下测试场景：

1. 账户创建测试
   - 50个并发用户
   - 每个用户执行100次循环
   - 10秒内完成用户启动

2. 交易处理测试
   - 100个并发用户
   - 每个用户执行200次循环
   - 20秒内完成用户启动

## 运行测试

### 方法1：使用JMeter GUI

1. 打开JMeter GUI
2. 加载测试计划文件：`scripts/jmeter/balance-calculator-test.jmx`
3. 点击"运行"按钮开始测试

### 方法2：使用命令行

1. 确保脚本具有执行权限：
   ```bash
   chmod +x scripts/generate-performance-report.sh
   ```

2. 运行测试脚本：
   ```bash
   ./scripts/generate-performance-report.sh
   ```

## 查看测试报告

测试完成后，可以在以下位置查看测试报告：

- HTML报告：`reports/performance/latest`
- 汇总报告：`reports/performance/latest_summary`

## 性能指标说明

测试报告包含以下关键性能指标：

1. 响应时间
   - 平均值
   - 中位数
   - 90%线
   - 95%线
   - 99%线

2. 吞吐量
   - 每秒请求数（TPS）
   - 每秒事务数

3. 错误率
   - 错误请求百分比
   - 错误类型分布

## 性能基准

系统应满足以下性能基准：

1. 账户创建
   - 平均响应时间 < 200ms
   - 95%响应时间 < 500ms
   - 错误率 < 0.1%

2. 交易处理
   - 平均响应时间 < 300ms
   - 95%响应时间 < 800ms
   - 错误率 < 0.1%

## 注意事项

1. 运行测试前确保系统处于稳定状态
2. 测试环境应尽可能接近生产环境
3. 建议在非高峰期进行性能测试
4. 测试数据会自动清理，不会影响生产数据 